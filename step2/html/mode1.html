<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript">
        //浏览器宿主的全局环境中，this指的是window对象。
        console.log(this === window);
        //浏览器中在全局环境下，使用var声明变量其实就是赋值给this或window。
        var info = "Hello World";
        console.log(this.info);
        console.log(window.info);
        console.log(this.info === window.info); //true
    </script>
    <script type="text/javascript">
        //任何情况下，创建变量时没有使用var或者let(ECMAScript 6)，也是在操作全局this
        username = "ZhangSan";
        function test() {
            username = "Jihann";
        }
        console.log(this.username); //ZhangSan
        test();
        console.log(this.username); //Jihann
    </script>
    <script type="text/javascript">
        //函数正常被调用（不带new）时，里面的this指向的是全局作用域
        foo = "bar";
        function testThis() {
            "use strict";
            this.foo = "foo";
        }
        console.log(this.foo); //bar
        testThis();//Cannot set property 'foo' of undefined
    </script>
    <script type="text/javascript">
        //当用调用函数时使用了new关键字，此刻this指代一个新的上下文，不再指向全局this。
        foo = "bar";
        function TestThis() {
            this.foo = "foo";
        }
        console.log(this.foo); //bar
        new TestThis();
        console.log(this.foo); //bar
        console.log(new TestThis().foo); //foo
    </script>
</head>
<body>
<span>详解this</span>
</body>
</html>